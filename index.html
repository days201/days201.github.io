<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="favicon.png?v=1">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daya Silverstein — Mechanical Engineering @ Queen's University</title>
  <meta name="description" content="Portfolio of Daya Silverstein, Mechanical Engineering student at Queen's University. Projects in sustainable design, HVAC interest, FEA simulation, and CAD." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      /* Light theme */
      --bg: #f7f9fb;
      --card: #ffffff;
      --ink: #14213d;
      --muted: #4b5563;
      --brand: #5b8def; /* soft google‑ish blue */
      --accent: #7ad3a8; /* mint */
      --accent2:#f7b267; /* warm sand */
      --ring: rgba(91,141,239,.35);
      --radius: 18px;
      --shadow: 0 8px 30px rgba(20,33,61,.07);
      
      /* Timing variables */
      --ease-out: cubic-bezier(.16,.84,.44,1);
      --duration-fast: 120ms;
      --duration-normal: 200ms;
    }
    
    :root[data-theme='dark']{
      /* Dark theme overrides */
      --bg: #0f1624;
      --card: #182335;
      --ink: #f1f5f9;
      --muted: #94a3b8;
      --brand: #5b8def;
      --accent: #7ad3a8;
      --accent2: #f7b267;
      --ring: rgba(91,141,239,.35);
      --shadow: 0 8px 30px rgba(0,0,0,.5);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1000px;margin:0 auto;padding:24px}
    /* header removed per request */
    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:28px;align-items:center;margin:24px 0}
    .badge{display:inline-block;background:linear-gradient(135deg,var(--brand),var(--accent));color:#fff;padding:6px 12px;border-radius:999px;font-weight:600;font-size:12px;letter-spacing:.4px}
    h1{font-size:42px;line-height:1.05;margin:10px 0 8px}
    .subtitle{color:var(--muted);font-size:18px}
    .cta{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:10px;background:var(--card);border:1px solid #e5e7eb;border-radius:14px;padding:10px 14px;font-weight:600;box-shadow:var(--shadow);color:var(--brand);transition:transform var(--duration-fast) var(--ease-out), box-shadow var(--duration-fast) var(--ease-out)}
    .btn:active{transform:scale(.97);box-shadow:0 4px 15px rgba(20,33,61,.15)}
    .btn:focus-visible{outline:2px solid var(--ring);outline-offset:2px}
    .btn[aria-disabled="true"]{opacity:.55;pointer-events:none}
    .grid{display:grid;gap:18px}
    .cards{grid-template-columns:repeat(auto-fill,minmax(280px,1fr))}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;border:1px solid #eef2f7;transition:transform var(--duration-normal) var(--ease-out), box-shadow var(--duration-normal) var(--ease-out}
    .card:hover{transform:translateY(-3px);box-shadow:0 10px 34px rgba(20,33,61,.10)}
    .thumb{
      width:100%;height:160px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;letter-spacing:.3px;text-transform:uppercase;
      position:relative; overflow:hidden; /* needed for canvas + highlight */
      text-align:center; padding:0 10px; /* nicer wrap on narrow screens */
      z-index:0; /* text sits above canvas by default */
    }
    /* subtle translucent highlight behind the title text — no blur */
    .thumb::after{
      content:"";
      position:absolute;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:min(70%,460px);
      height:34px;
      background:rgba(255,255,255,.12);
      border-radius:999px;
      z-index:0;
      pointer-events:none;
      mix-blend-mode:screen;
    }
    .thumb > *{position:relative; z-index:1}

    /* themed project thumbnails */
    .thumb.water{background:
      radial-gradient(60% 100% at 20% 0%, rgba(255,255,255,.25) 0 60%, transparent 61%),
      radial-gradient(40% 80% at 90% 30%, rgba(255,255,255,.18) 0 60%, transparent 61%),
      linear-gradient(135deg,#7dc9ff,#5b8def 40%, #214e9a)}
    .thumb.path{background:
      repeating-linear-gradient(45deg, rgba(255,255,255,.08) 0 10px, rgba(255,255,255,0) 10px 20px),
      linear-gradient(135deg,#0b1020,#3b485a)}
    .thumb.cad{background:
      radial-gradient(200px 200px at 85% 20%, rgba(255,255,255,.35) 0 120px, transparent 121px),
      linear-gradient(135deg,#0ea5e9,#5b8def)}

    .section{margin:36px 0}
    .section h2{font-size:28px;margin:0 0 12px}
    ul.clean{list-style:none;padding:0;margin:0}
    ul.clean li{margin:10px 0;color:var(--muted)}
    footer{margin:36px 0 24px;color:var(--muted);font-size:14px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{background:var(--card);border:1px solid #e5e7eb;border-radius:999px;padding:6px 10px;font-size:12px;font-weight:600;transition:transform var(--duration-fast) var(--ease-out), outline var(--duration-fast) var(--ease-out);position:relative}
    .chip:hover, .chip:focus{transform:translateY(-2px);outline:2px solid var(--ring);outline-offset:1px}
    .chip:focus-visible{outline:2px solid var(--ring);outline-offset:2px}
    
    /* Tooltip system */
    .tooltip{
      position:absolute;
      bottom:calc(100% + 8px);
      left:50%;
      transform:translateX(-50%);
      background:var(--ink);
      color:var(--bg);
      padding:6px 10px;
      border-radius:6px;
      font-size:11px;
      white-space:nowrap;
      opacity:0;
      pointer-events:none;
      transition:opacity var(--duration-fast) var(--ease-out);
      z-index:1000;
    }
    .tooltip::after{
      content:'';
      position:absolute;
      top:100%;
      left:50%;
      transform:translateX(-50%);
      border:4px solid transparent;
      border-top-color:var(--ink);
    }
    [data-tooltip]:hover .tooltip,
    [data-tooltip]:focus .tooltip{
      opacity:1;
    }
    .fade{opacity:0;transform:translateY(8px);animation:fade .6s ease forwards}
    .fade2{animation-delay:.12s}
    .fade3{animation-delay:.2s}
    .fade4{animation-delay:.28s}
    @keyframes fade{to{opacity:1;transform:translateY(0)}}
    /* accessibility helpers */
    .skip{position:absolute;left:-9999px;top:auto}
    .skip:focus{left:12px;top:12px;background:#fff;border:2px solid var(--brand);padding:8px;border-radius:8px}
    /* scroll progress bar */
    #scrollBar{
      position:fixed;
      top:0;
      left:0;
      height:4px;
      background:var(--brand);
      z-index:1000;
      pointer-events:none;
      transition:width var(--duration-fast) var(--ease-out);
      width:0;
    }
    
    /* theme toggle */
    .theme-toggle{
      position:fixed;
      top:20px;
      right:20px;
      width:44px;
      height:44px;
      border-radius:50%;
      background:var(--card);
      border:1px solid #e5e7eb;
      box-shadow:var(--shadow);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      transition:transform var(--duration-fast) var(--ease-out), box-shadow var(--duration-fast) var(--ease-out);
      z-index:1000;
    }
    .theme-toggle:hover{transform:scale(1.05)}
    .theme-toggle:active{transform:scale(.95)}
    .theme-toggle:focus-visible{outline:2px solid var(--ring);outline-offset:2px}
    .theme-toggle svg{width:20px;height:20px;color:var(--ink)}
    
    /* section nav */
    .section-nav{
      position:fixed;
      left:20px;
      top:50%;
      transform:translateY(-50%);
      display:flex;
      flex-direction:column;
      gap:12px;
      z-index:1000;
    }
    .nav-dot{
      width:12px;
      height:12px;
      border-radius:50%;
      background:transparent;
      border:2px solid var(--muted);
      cursor:pointer;
      transition:all var(--duration-fast) var(--ease-out);
      position:relative;
    }
    .nav-dot:hover, .nav-dot:focus{
      border-color:var(--brand);
      transform:scale(1.2);
    }
    .nav-dot:focus-visible{
      outline:2px solid var(--ring);
      outline-offset:2px;
    }
    .nav-dot.active{
      background:var(--brand);
      border-color:var(--brand);
    }
    
    /* ambient background */
    .ambient-bg{
      position:fixed;
      inset:0;
      z-index:-1;
      opacity:0.3;
      background:radial-gradient(circle at 20% 80%, rgba(91,141,239,0.1) 0%, transparent 50%),
                 radial-gradient(circle at 80% 20%, rgba(122,211,168,0.1) 0%, transparent 50%);
      animation:ambientFloat 8s ease-in-out infinite alternate;
    }
    :root[data-theme='dark'] .ambient-bg{
      background:radial-gradient(circle at 20% 80%, rgba(91,141,239,0.05) 0%, transparent 50%),
                 radial-gradient(circle at 80% 20%, rgba(122,211,168,0.05) 0%, transparent 50%);
    }
    @keyframes ambientFloat{
      from{transform:translateX(-10px) translateY(-5px)}
      to{transform:translateX(10px) translateY(5px)}
    }
    
    /* reduced motion overrides */
    @media (prefers-reduced-motion: reduce){
      .ambient-bg{animation:none !important}
      * {transition-duration:0s !important}
    }
    html[data-anim='off'] .ambient-bg{animation:none !important}
    html[data-anim='off'] * {transition-duration:0s !important}
    
    /* responsive */
    @media (max-width: 860px){
      .hero{grid-template-columns:1fr}
      .subtitle{font-size:16px}
      .section-nav{display:none}
      .theme-toggle{bottom:20px;top:auto}
    }
  </style>
</head>
<noscript>
  <style>
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f1624;
        --card: #182335;
        --ink: #f1f5f9;
        --muted: #94a3b8;
        --shadow: 0 8px 30px rgba(0,0,0,.5);
      }
    }
    .theme-toggle { display: none; }
  </style>
</noscript>
<body>
  <div id="scrollBar"></div>
  <div class="ambient-bg"></div>
  
  <button class="theme-toggle" aria-label="Toggle dark mode" aria-pressed="false">
    <svg class="sun-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
    </svg>
    <svg class="moon-icon" style="display:none" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
    </svg>
  </button>
  
  <nav class="section-nav" aria-label="Section navigation">
    <a href="#projects" class="nav-dot" aria-label="Projects" data-tooltip="Projects">
      <div class="tooltip">Projects</div>
    </a>
    <a href="#skills" class="nav-dot" aria-label="Skills" data-tooltip="Skills">
      <div class="tooltip">Skills</div>
    </a>
    <a href="#experience" class="nav-dot" aria-label="Experience" data-tooltip="Experience">
      <div class="tooltip">Experience</div>
    </a>
    <a href="#contact" class="nav-dot" aria-label="Contact" data-tooltip="Contact">
      <div class="tooltip">Contact</div>
    </a>
  </nav>

  <a class="skip" href="#content">Skip to content</a>
  <div class="container">

    <main id="content">
      <section class="hero">
        <div class="fade">
          <span class="badge">Mechanical Engineering student at Queen's</span>
          <h1>Hello, I’m Daya.</h1>
          <!-- rewritten to be personal & concise -->
          <p class="subtitle">I’m a second-year Mechanical Engineering student. My passion lies in creating sustainable designs that maximize efficiency, performance, and turn ideas into practical solutions.</p>
          <div class="cta">
            <a class="btn" href="#projects" aria-label="View projects">View Projects</a>
            <a class="btn" href="mailto:daya.silverstein@queensu.ca" aria-label="Email Daya">Email me</a>
            <a class="btn" href="assets/Resume_Daya_Silverstein.pdf" aria-disabled="true" aria-label="Resume coming soon">Download Resume (soon)</a>
          </div>
          <!-- removed "Internship-ready / No tracking / Static fast" chips per request -->
        </div>
        <div class="fade fade2">
          <div class="card" aria-label="About me highlights">
            <h2 style="margin-top:0">In Summary</h2>
            <ul class="clean">
              <li>Interests: Sustainable design, HVAC, FEA simulation</li>
              <li>Strengths: Assembly coordination, CAD modeling, early prototyping</li>
              <li>Looking for: Engineering internships and project teams</li>
            </ul>
            <div class="chips" style="margin-top:12px">
              <span class="chip" data-tooltip="Used in: Assembly Generator" aria-describedby="fusion-tooltip">
                Fusion 360
                <div class="tooltip" role="tooltip" id="fusion-tooltip">Used in: Assembly Generator</div>
              </span>
              <span class="chip">SolidWorks</span>
              <span class="chip">MATLAB</span>
              <span class="chip">Python</span>
              <span class="chip">Arduino</span>
            </div>
          </div>
        </div>
      </section>

      <section id="projects" class="section fade fade3">
        <h2>Featured Projects</h2>
        <div class="grid cards">
          <!-- Project 1 -->
          <article class="card">
            <div class="thumb water" aria-hidden="true">Water Filtration System</div>
            <h3 style="margin:12px 0 6px">Water Filtration System</h3>
            <p class="subtitle">Designed and manufactured the mixing assembly; coordinated overall assembly and Arduino timing.</p>
            <ul class="clean">
              <li><strong>Problem:</strong> Produce potable water from dirty input in a single, compact system.</li>
              <li><strong>Approach:</strong> Peristaltic pump + DC motor mixing with alum, followed by mechanical filtration; custom 3D‑printed components.</li>
              <li><strong>Result:</strong> Working prototype. (Demo video placeholder — YouTube link coming.)</li>
              <li><strong>Status:</strong> Finished • <span aria-label="year">2025</span></li>
            </ul>
            <div class="chips"><span class="chip">Arduino</span><span class="chip">3D printing</span><span class="chip">Peristaltic pump</span></div>
            <div style="margin-top:10px">
              <a href="#" aria-disabled="true">Demo (YouTube soon)</a>
            </div>
          </article>

          <!-- Project 2 -->
          <article class="card">
            <div class="thumb path" aria-hidden="true">Path‑Planning</div>
            <h3 style="margin:12px 0 6px">Autonomous Path‑Planning for Warehouse Robots</h3>
            <p class="subtitle">A* path planning and MATLAB simulation to navigate checkpoints while avoiding obstacles.</p>
            <ul class="clean">
              <li><strong>Problem:</strong> Plan optimal, collision‑free routes through a warehouse with constraints.</li>
              <li><strong>Approach:</strong> A* algorithm generates an ideal path; MATLAB used for simulation and testing.</li>
              <li><strong>Status:</strong> Finished • <span aria-label="year">2025</span></li>
            </ul>
            <div class="chips"><span class="chip">A*</span><span class="chip">MATLAB</span></div>
            <div style="margin-top:10px">
              <a href="https://github.com/mohammedz06/Autonomous-Path-Finding" target="_blank" rel="noopener">View repository</a>
            </div>
          </article>

          <!-- Project 3 -->
          <article class="card">
            <div class="thumb cad" aria-hidden="true">Fusion Assembly Generator</div>
            <h3 style="margin:12px 0 6px">Fusion Assembly Generator</h3>
            <p class="subtitle">Converts natural‑language prompts into Fusion 360 scripts that generate mechanical assemblies.</p>
            <ul class="clean">
              <li><strong>Problem:</strong> Bridge vague design intents and executable CAD by auto‑generating Fusion scripts.</li>
              <li><strong>Approach:</strong> Python add‑in leveraging Fusion API; schema parsing to produce runnable scripts.</li>
              <li><strong>Status:</strong> Ongoing • <span aria-label="year">2025</span></li>
            </ul>
            <div class="chips"><span class="chip">Python</span><span class="chip">Fusion API</span></div>
            <div style="margin-top:10px">
              <a href="https://github.com/days201/Fusion_Assembly_Generator" target="_blank" rel="noopener">View repository</a>
            </div>
          </article>
        </div>
      </section>

      <section id="skills" class="section fade fade4">
        <h2>Skills</h2>
        <div class="grid cards" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr))">
          <div class="card">
            <h3 style="margin-top:0">CAD</h3>
            <ul class="clean">
              <li>Fusion 360 — <strong>Intermediate</strong></li>
              <li>SolidWorks — <strong>Intermediate</strong></li>
              <li>Revit — <strong>Intermediate</strong> (ACU—<em>in progress</em>)</li>
            </ul>
          </div>
          <div class="card">
            <h3 style="margin-top:0">Analysis</h3>
            <ul class="clean">
              <li>FEA — <em>in progress</em> (tooling TBD)</li>
              <li>CFD — <em>in progress</em> (tooling TBD)</li>
              <li>MATLAB, Python (NumPy)</li>
            </ul>
          </div>
          <div class="card">
            <h3 style="margin-top:0">Fabrication & Controls</h3>
            <ul class="clean">
              <li>3D printing</li>
              <li>Arduino prototyping</li>
            </ul>
          </div>
          <div class="card">
            <h3 style="margin-top:0">Standards</h3>
            <ul class="clean">
              <li>GD&T, Tolerancing, basic ASME Y14.5</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="experience" class="section fade">
        <h2>Experience & Leadership</h2>
        <article class="card">
          <h3 style="margin-top:0">Volunteer Tutor — CTA Drop‑in Tutoring Club</h3>
          <p class="subtitle">Math & Sciences • 2023–2024</p>
          <ul class="clean">
            <li>Supported students in core math and science fundamentals; adapted explanations to individual learning styles.</li>
          </ul>
        </article>
        <!-- Future team roles will appear here -->
      </section>

      <section id="contact" class="section fade">
        <h2>Contact</h2>
        <div class="card">
          <p style="margin-top:0">The fastest way to reach me is email.</p>
          <p>
            <a class="btn" href="mailto:daya.silverstein@queensu.ca" aria-label="send email">daya.silverstein@queensu.ca</a>
          </p>
          <div class="chips">
            <a class="chip" href="https://github.com/days201" target="_blank" rel="noopener" aria-label="GitHub">GitHub</a>
            <a class="chip" href="https://www.linkedin.com/" target="_blank" rel="noopener" aria-label="LinkedIn">LinkedIn</a>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div>© <span id="y"></span> Daya Silverstein • Built with static HTML/CSS/JS.</div>
    </footer>
  </div>

  <script>
    // ---- Initial setup and theme detection ----
    const html = document.documentElement;
    const themeToggle = document.querySelector('.theme-toggle');
    const sunIcon = document.querySelector('.sun-icon');
    const moonIcon = document.querySelector('.moon-icon');
    const scrollBar = document.getElementById('scrollBar');
    const navDots = document.querySelectorAll('.nav-dot');
    
    // Initialize theme
    function initTheme() {
      const saved = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = saved || (prefersDark ? 'dark' : 'light');
      setTheme(theme);
    }
    
    function setTheme(theme) {
      html.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      themeToggle.setAttribute('aria-pressed', theme === 'dark');
      
      if (theme === 'dark') {
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      } else {
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
      }
    }
    
    // Theme toggle functionality
    themeToggle.addEventListener('click', () => {
      const current = html.getAttribute('data-theme');
      setTheme(current === 'dark' ? 'light' : 'dark');
    });
    
    // ---- Scroll progress bar ----
    function updateScrollProgress() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
      const progress = Math.min(scrollTop / scrollHeight, 1);
      scrollBar.style.width = `${progress * 100}%`;
    }
    
    // ---- Section navigation (scroll spy) ----
    const sections = ['projects', 'skills', 'experience', 'contact'];
    const sectionElements = sections.map(id => document.getElementById(id));
    
    function updateActiveSection() {
      const scrollTop = window.pageYOffset + window.innerHeight * 0.5;
      
      let activeIndex = 0;
      sectionElements.forEach((section, index) => {
        if (section && section.offsetTop <= scrollTop) {
          activeIndex = index;
        }
      });
      
      navDots.forEach((dot, index) => {
        dot.classList.toggle('active', index === activeIndex);
      });
    }
    
    // Smooth scroll for nav dots (respect reduced motion)
    navDots.forEach((dot, index) => {
      dot.addEventListener('click', (e) => {
        e.preventDefault();
        const target = sectionElements[index];
        if (target) {
          const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches || 
                              html.getAttribute('data-anim') === 'off';
          
          if (reduceMotion) {
            target.scrollIntoView();
          } else {
            target.scrollIntoView({ behavior: 'smooth' });
          }
        }
      });
    });
    
    // ---- Animation control for reduced motion ----
    const media = window.matchMedia('(prefers-reduced-motion: reduce)');
    function handleMotion(e) {
      if (e.matches) {
        html.setAttribute('data-anim', 'off');
        // Disable fade animations
        document.querySelectorAll('.fade,.fade2,.fade3,.fade4').forEach(el => {
          el.style.animation = 'none';
          el.style.opacity = 1;
          el.style.transform = 'none';
        });
      } else {
        html.removeAttribute('data-anim');
      }
    }
    
    // Initial check for reduced motion
    handleMotion(media);
    media.addEventListener('change', handleMotion);
    
    // ---- Scroll event listeners (throttled) ----
    let ticking = false;
    function handleScroll() {
      if (!ticking) {
        requestAnimationFrame(() => {
          updateScrollProgress();
          updateActiveSection();
          ticking = false;
        });
        ticking = true;
      }
    }
    
    // ---- Event listeners ----
    window.addEventListener('scroll', handleScroll);
    window.addEventListener('resize', handleScroll);
    
    // ---- Current year ----
    document.getElementById('y').textContent = new Date().getFullYear();
    
    // ---- Initialize everything ----
    initTheme();
    handleScroll(); // Initial call for progress and active section

    // ---- Subtle Dijkstra-style split path animation for Path‑Planning tile ----
    (function(){
      const tiles = document.querySelectorAll('.thumb.path');
      if (!tiles.length) return;

      tiles.forEach(tile => {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        canvas.style.position = 'absolute';
        canvas.style.inset = '0';
        canvas.style.zIndex = '0';    // under text + ::after
        canvas.setAttribute('aria-hidden','true');
        tile.appendChild(canvas);

        let w=0,h=0, dpr=1, running = true;

        function resize(){
          const rect = tile.getBoundingClientRect();
          w = Math.floor(rect.width);
          h = Math.floor(rect.height);
          dpr = Math.min(window.devicePixelRatio || 1, 2);
          canvas.width = w * dpr;
          canvas.height = h * dpr;
          canvas.style.width = w + 'px';
          canvas.style.height = h + 'px';
          ctx.setTransform(dpr,0,0,dpr,0,0);
          initGraph();
        }

        // Build a tiny directed acyclic "road" graph with splits
        let nodes = [];
        let edges = [];
        let routes = [];
        let particles = [];

        function initGraph(){
          nodes = [];
          edges = [];
          routes = [];
          particles = [];

          const margin = 18;
          const cy = h/2;

          const cols = 6;
          const colX = i => margin + (w - margin*2) * (i/(cols-1));

          const n = [];
          n.push({x: colX(0), y: cy});                       // 0 start
          n.push({x: colX(1), y: cy});                       // 1
          n.push({x: colX(2), y: cy - h*0.18});              // 2 upper
          n.push({x: colX(2), y: cy + h*0.18});              // 3 lower
          n.push({x: colX(3), y: cy - h*0.28});              // 4 upper-1
          n.push({x: colX(3), y: cy});                       // 5 mid
          n.push({x: colX(3), y: cy + h*0.28});              // 6 lower-1
          n.push({x: colX(4), y: cy - h*0.18});              // 7 upper-2
          n.push({x: colX(4), y: cy + h*0.18});              // 8 lower-2
          n.push({x: colX(5), y: cy});                       // 9 end
          nodes = n;

          function addEdge(a,b){ edges.push({a,b}); }

          addEdge(0,1);
          addEdge(1,2); addEdge(1,3);
          addEdge(2,4); addEdge(2,5);
          addEdge(3,5); addEdge(3,6);
          addEdge(4,7); addEdge(5,7); addEdge(5,8); addEdge(6,8);
          addEdge(7,9); addEdge(8,9);

          routes = [
            [0,1,2,4,7,9],
            [0,1,2,5,7,9],
            [0,1,3,5,8,9],
            [0,1,3,6,8,9]
          ];

          const count = 8; // subtle
          for (let i=0;i<count;i++){
            const r = routes[i % routes.length];
            particles.push({
              route: r.slice(),
              t: Math.random(),
              seg: 0,
              speed: 0.0015 + Math.random()*0.001,
              radius: 2 + Math.random()*1.5
            });
          }
        }

        function draw(){
          ctx.clearRect(0,0,w,h);

          // Edges
          ctx.lineWidth = 1.5;
          edges.forEach(e=>{
            const A = nodes[e.a], B = nodes[e.b];
            ctx.beginPath();
            ctx.strokeStyle = 'rgba(255,255,255,0.18)';
            const mx = (A.x+B.x)/2;
            const my = (A.y+B.y)/2 + (B.y-A.y)*0.15;
            ctx.moveTo(A.x, A.y);
            ctx.quadraticCurveTo(mx, my, B.x, B.y);
            ctx.stroke();
          });

          // Nodes
          nodes.forEach(nd=>{
            ctx.beginPath();
            ctx.fillStyle = 'rgba(255,255,255,0.18)';
            ctx.arc(nd.x, nd.y, 2, 0, Math.PI*2);
            ctx.fill();
          });

          // Particles
          particles.forEach(p=>{
            const a = nodes[p.route[p.seg]];
            const b = nodes[p.route[p.seg+1]];
            const mx = (a.x+b.x)/2;
            const my = (a.y+b.y)/2 + (b.y-a.y)*0.15;

            const t = p.t;
            const x = (1-t)*(1-t)*a.x + 2*(1-t)*t*mx + t*t*b.x;
            const y = (1-t)*(1-t)*a.y + 2*(1-t)*t*my + t*t*b.y;

            ctx.beginPath();
            ctx.fillStyle = 'rgba(122,211,168,0.75)';
            ctx.arc(x, y, p.radius, 0, Math.PI*2);
            ctx.fill();

            p.t += p.speed;
            if (p.t >= 1){
              p.t = 0;
              p.seg++;
              if (p.seg >= p.route.length - 1){
                p.seg = 0;
                p.route = routes[Math.floor(Math.random()*routes.length)].slice();
              }
            }
          });
        }

        let raf=0;
        function loop(){
          // Check if animations should be stopped
          const shouldStop = window.matchMedia('(prefers-reduced-motion: reduce)').matches || 
                           html.getAttribute('data-anim') === 'off';
          if (shouldStop) {
            running = false;
            ctx.clearRect(0,0,w,h);
            return;
          }
          
          if (!running) return;
          draw();
          raf = requestAnimationFrame(loop);
        }

        resize();
        loop();

        window.addEventListener('resize', resize);
        
        // Listen for animation state changes
        media.addEventListener('change', () => {
          const shouldStop = media.matches || html.getAttribute('data-anim') === 'off';
          if (shouldStop && running) {
            running = false;
            ctx.clearRect(0,0,w,h);
          } else if (!shouldStop && !running) {
            running = true;
            loop();
          }
        });
      });
    })();
  </script>
</body>
</html>
